# Week 7 Quiz

### Quiz Instructions

In this Week 7 Quiz, we will ask you a few questions about [ABCD Demographic, Physical, and Mental Health Assessments](https://youtu.be/VxwWQRvE7QY) and [Scientific Questions and Statistical Issues](https://youtu.be/auzLLbQPMfY).

***

## ABCD questions

**Question 1**

ABCD mental and physical health assessments include measures related to the following domains: (select all that apply)

- [ ] Categorical diagnoses and dimensional measures of mental health
- [ ] Trait-like behaviors and personality measures associated with risk factors and consequences of mental health outcomes 
Stress, life events (e.g., COVID-19), and peer environment (e.g., friendships and bullying)
- [ ] Blood draws and saliva samples for genetic and hormone testing
- [ ] Nutrition, physical activity, and actigraphy (fitbit) data
- [ ] Baby teeth for determining early exposure to toxins

<details>
<summary>Click to see answer</summary>

- Categorical diagnoses and dimensional measures of mental health
- Trait-like behaviors and personality measures associated with risk factors and consequences of mental health outcomes 
Stress, life events (e.g., COVID-19), and peer environment (e.g., friendships and bullying)
- Blood draws and saliva samples for genetic and hormone testing
- Nutrition, physical activity, and actigraphy (fitbit) data
- Baby teeth for determining early exposure to toxins

***

</details>

**Question 2**

What are some of the key challenges and considerations pertaining to the design of the ABCD health assessment? (select all that apply)

- [ ] Collecting measures that are consistent across visits versus measures that are relevant for different stages of development
- [ ] Utilizing reliable and valid instruments that are known to be relevant given prior literature versus opportunities that allow for discovery science
- [ ] Obtaining both child and parent blood draws required by the study
- [ ] Keeping participant burden in mind so to ensure retention over the course of the study


<details>
<summary>Click to see answer</summary>

- Collecting measures that are consistent across visits versus measures that are relevant for different stages of development
- Utilizing reliable and valid instruments that are known to be relevant given prior literature versus opportunities that allow for discovery science
- Keeping participant burden in mind so to ensure retention over the course of the study

***

</details>

**Question 3**

Parent and child reports are frequently inconsistent with one another. One way in which a researcher may evaluate the convergent validity of certain domains (e.g., problem behavior) is through teacher reports.

- True
- False


<details>
<summary>Click to see answer</summary>

- True

***

</details>

**Question 4**

What are some of the main goals of interviewing the parent (in addition to the child) about themselves and the child? (select all that apply)

- [ ] Parents may be able to report about certain domains such as externalizing symptoms more accurately than the child
- [ ] Parents have greater access to knowledge of family history
- [ ] Parent mental health may color their reports of the child
- [ ] To allow the parent to feel more involved with the study in order to benefit participant retention
- [ ] To capture shared genetic information and environmental/contextual factors associated with mental health outcomes

<details>
<summary>Click to see answer</summary>

- Parents may be able to report about certain domains such as externalizing symptoms more accurately than the child
- Parents have greater access to knowledge of family history
- Parent mental health may color their reports of the child
- To capture shared genetic information and environmental/contextual factors associated with mental health outcomes

***

</details>

**Question 5**

Which demographic information is collected in order to measure socioeconomic status? (select all that apply)

- [ ] Household income data is objective and thus is used as the sole indicator of socioeconomic status in ABCD 
- [ ] A given income may provide different levels of financial stability in different parts of the country, and thus parental occupation, education, and family structure are also collected
- [ ] Family financial adversity and neighborhood adversity provide additional important insight into an individual’s lived socioeconomic situation
- [ ] Rather than relying on participant report, poverty norms in geographic areas (determined by zip code) are used to estimate a family’s socioeconomic status

<details>
<summary>Click to see answer</summary>

- A given income may provide different levels of financial stability in different parts of the country, and thus parental occupation, education, and family structure are also collected
- Family financial adversity and neighborhood adversity provide additional important insight into an individual’s lived socioeconomic situation

***

</details>

## ReproNim questions

**Question 6**

Researcher 1 has published the results of a study. Since then the most recent version of the analysis software has changed. They want to see if their results hold with the new software version.

Researcher 2 wants to see if Researcher 1’s results hold in a different dataset. They use the same software and code for the analysis.

If the results hold in both scenarios, which of the following are true of the primary study’s results?


- They are generalizable and robust
- They are robust and replicable
- They are reproducIble and robust 
- They are reproducible and replicable


<details>
<summary>Click to see answer</summary>

- They are robust and replicable

***

</details>

**Question 7**

The positive predictive value depends on which of the following values (select all that apply)?

- [ ] Type I error
- [ ] Type II error
- [ ] Probability of alternative hypothesis
- [ ] Probability of null hypothesis
- [ ] Power


<details>
<summary>Click to see answer</summary>

- Type I error
- Probability of alternative hypothesis
- Probability of null hypothesis
- Power

***

</details>

**Question 8**

Statement 1: Participants were more rewarded in condition A because the ventral striatum showed greater activity

Statement 2: Trials where participants reported greater subjective reward were associated with greater activity in the ventral striatum. 

Which of the following is true (select all that apply)?

- [ ] Statement 1 is a forward inference.
- [ ] Statement 1 is a reverse inference.
- [ ] Statement 2 is a forward inference.
- [ ] Statement 2 is a reverse inference.

<details>
<summary>Click to see answer</summary>

- Statement 1 is a reverse inference.
- Statement 2 is a forward inference.

***

</details>

**Question 9**

Which is true of predictive modeling (select all that apply)?

- [ ] Improves theoretical accuracy
- [ ] Minimizes the combination of bias and estimation variance
- [ ] Primarily cares about accuracy
- [ ] Obtains the most accurate representation of the underlying theory

<details>
<summary>Click to see answer</summary>

- Minimizes the combination of bias and estimation variance
Primarily cares about accuracy

***

</details>

**Question 10**

For this question you will need some data with which to explore the relationships between sample size and the different measures of effect size discussed in [this week's lecture (4:33)](https://youtu.be/auzLLbQPMfY?t=273). We have simulated a dataset for you to use that is based on [ABCD structural MRI morphometric and image intensity measures ("abcd_smrip201")](https://nda.nih.gov/data_structure.html?short_name=abcd_smrip201) data file. These data represent the sum total volume of both the left and right hippocampi across 10000 participants. You can download our simulated data file for this assignment [on our GitHub](https://github.com/ABCD-ReproNim/exercises/blob/main/week_7/simulated_data.tsv) or simulate it yourself. Alternatively, if you have ABCD data access, feel free to work directly with the [abcd_smrip201](https://nda.nih.gov/data_structure.html?short_name=abcd_smrip201) data (the answers you will compute should end up being the same).

First, in your favorite programming language (we like Python), either read in the [simulated data file](https://github.com/ABCD-ReproNim/exercises/blob/main/week_7/simulated_data.tsv) (option A), simulate the data yourself (option B), or download and parce the appropriate ABCD data elements from [abcd_smrip201](https://nda.nih.gov/data_structure.html?short_name=abcd_smrip201) (option C).


*Option A: read in data from [our GitHub](https://github.com/ABCD-ReproNim/exercises/blob/main/week_7/simulated_data.tsv)*
```
import requests
import io

url = "https://raw.githubusercontent.com/ABCD-ReproNim/exercises/main/week_7/simulated_data.tsv" 
# Make sure the url is the raw version of the file on GitHub
download = requests.get(url).content

# Reading the downloaded content and turning it into a pandas dataframe
df = pd.read_csv(io.StringIO(download.decode('utf-8')), sep='\t')
```

*Option B: simulate data using on the mean and standard deviation of hippocampal values from [abcd_smrip201](https://nda.nih.gov/data_structure.html?short_name=abcd_smrip201)*
```
# male
m_mean = 8407
m_std = 813
m_vol = np.random.normal(m_mean, m_std, 5000)
m_dat = pd.DataFrame(m_vol, columns=['hippocampi'])
m_dat['sex'] = 'M'
m_dat.head()

# female
f_mean = 7892
f_std = 775
f_vol = np.random.normal(f_mean, f_std, 5000)
f_dat = pd.DataFrame(f_vol, columns=['hippocampi'])
f_dat['sex'] = 'F'
f_dat.head()

# concatenate
hippo = pd.concat([m_dat, f_dat])
```

*Option C: read in and parce ABCD data using on the mean and standard deviation of hippocampal values from [abcd_smrip201](https://nda.nih.gov/data_structure.html?short_name=abcd_smrip201)*
```
# import full data -- note you will need to download this data from the NDA directly
smrip201_file = '/home/jovyan/ABCD3/abcd_smrip201.txt'
smrip201 = pd.read_csv(smrip201_file, sep='\t',skiprows=[1],header=[0])

# subset to only include columns of interest
columns = ['subjectkey','sex','smri_vol_scs_hpuslh','smri_vol_scs_hpusrh']
hippo = smrip201.loc[:,columns]
# sum left and right hippocampi
hippo['both'] = hippo['smri_vol_scs_hpuslh'] + hippo['smri_vol_scs_hpusrh']
# make names easier to read
hippo.rename(columns={'smri_vol_scs_hpuslh':'left','smri_vol_scs_hpusrh':'right'},inplace=True)
```

Now that you have the total hippocampal volume for both male and female participants, we can subset these data at multiple sample sizes to see the relationship between effect size and sample size. The goal is to get a distribution of effect sizes corresponding to each sample size we choose. We can then use these distributions to visualize how the mean effect sizes may change as a function of sample size.

We want to give you the opportunity to practice coding, so try to do the following on your own:

1) Create a vector of sample sizes beginning at 10 and ending at 1000, with increments of 20 (so, 50 different sample sizes). 
2) For each sample size, loop through a large number of iterations (eg, 1000) of subsetting the full male and female participant data so that each iteration has a subset where the number of male and female participants equals the sample size. 
3) For each iteration, calculate the raw effect size (e.g., the difference of the two sample means), the Cohen’s d, and the z-scored Cohen’s d. Also make sure to record the sample size for each iteration. 
4) Now calculate these values for each sample size with your specified number of iterations. For 1000 iterations over 50 sample sizes, this took ~8 minutes on the JupyterHub.

Here is a function you can use to calculate the effect sizes (step 3):
```
### function to calculate effect size for a given sample size
def eff_size_cal(df, niter, n_size):
    raw_eff = []
    cohen = []
    z = []
    for i in range(niter):
        male = df[df['sex']=='M'].sample(n_size)
        female = df[df['sex']=='F'].sample(n_size)
        m_mu = male['hippocampi'].mean()
        f_mu = female['hippocampi'].mean()
        #pooled standard deviation for males and females
        sigma = math.sqrt(((male['hippocampi'].std())**2 + (female['hippocampi'].std())**2)/(n_size))
        raw_eff.append(m_mu - f_mu)
        cohen.append((m_mu - f_mu)/sigma)
        z.append( ((m_mu - f_mu)/(sigma)) / math.sqrt(n_size))
        
    results = pd.DataFrame(list(zip(raw_eff,cohen,z)), columns=['raw_eff','cohen','z'])
    results['n'] = n_size
    
    return results
```
  
When you are finished calculating the numbers, plot the results. You’ll need three plots, one for the distributions of raw effect size, cohen’s d, and z-scored cohen’s d for each sample size you iterated over.

According to your results, as sample size increases which of the following are generally true (more or less, there will be variability across iterations). 

Note: remmeber your plots should show a *distribution* of effect sizes at each sample size. You should focus on if the *means* of the effect size distributions changes with each sample size step.

- Raw effect decreases, cohen’s d increases, z increases
- Raw effect increases, cohen’s d stays the same, z decreases
- Raw effect stays the same, cohen's d increases, z stays the same

<details>
<summary>Click to see answer</summary>

- Raw effect stays the same, cohen's d increases, z stays the same

see code in `exercises/week_7` for a solution

</details>
